/*!
 * `deployr` JavaScript Client Library v7.3.0
 * http://deployr.revolutionanalytics.com/documents/dev/client-jsdoc
 *
 * Includes:
 *   - superagent: https://github.com/visionmedia/superagent
 *   - ws: https://github.com/einaros/ws
 *   - D.js: http://malko.github.io/D.js
 *
 * Copyright (C) 2010-2014 by Revolution Analytics Inc.
 * Released under the Apache License 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 * Date: 2014-10-13
*/
!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.deployr=a()}}(function(){var a,b,c;return function d(a,b,c){function e(g,h){if(!b[g]){if(!a[g]){var i=typeof require=="function"&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=b[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,d,a,b,c)}return b[g].exports}var f=typeof require=="function"&&require;for(var g=0;g<c.length;g++)e(c[g]);return e}({1:[function(a,b,c){b.exports={"/r/user/login":{method:"POST",format:"json"},"/r/user/logout":{method:"POST",format:"json"},"/r/user/about":{method:"POST",format:"json"},"/r/user/autosave":{method:"POST",format:"json"},"/r/user/release":{method:"POST",format:"json"},"/r/project/create":{method:"POST",format:"json"},"/r/project/pool":{method:"POST",format:"json"},"/r/project/recycle":{method:"POST",format:"json"},"/r/project/list":{method:"POST",format:"json"},"/r/project/ping":{method:"POST",format:"json"},"/r/project/about":{method:"POST",format:"json"},"/r/project/about/update":{method:"POST",format:"json"},"/r/project/save":{method:"POST",format:"json"},"/r/project/saveas":{method:"POST",format:"json"},"/r/project/close":{method:"POST",format:"json"},"/r/project/grant":{method:"POST",format:"json"},"/r/project/import":{method:"POST",format:"json",upload:true},"/r/project/export":{method:"POST",format:"json"},"/r/project/delete":{method:"POST",format:"json"},"/r/project/execute/code":{method:"POST",format:"json"},"/r/project/execute/script":{method:"POST",format:"json"},"/r/project/execute/interrupt":{method:"POST",format:"json"},"/r/project/execute/console":{method:"POST",format:"json"},"/r/project/execute/history":{method:"POST",format:"json"},"/r/project/execute/flush":{method:"POST",format:"json"},"/r/project/execute/result/list":{method:"POST",format:"json"},"/r/project/execute/result/download":{method:"POST",format:"json"},"/r/project/execute/result/delete":{method:"POST",format:"json"},"/r/project/workspace/list":{method:"POST",format:"json"},"/r/project/workspace/get":{method:"POST",format:"json"},"/r/project/workspace/upload":{method:"POST",format:"json",upload:true},"/r/project/workspace/transfer":{method:"POST",format:"json"},"/r/project/workspace/push":{method:"POST",format:"json"},"/r/project/workspace/save":{method:"POST",format:"json"},"/r/project/workspace/store":{method:"POST",format:"json"},"/r/project/workspace/load":{method:"POST",format:"json"},"/r/project/workspace/delete":{method:"POST",format:"json"},"/r/project/directory/list":{method:"POST",format:"json"},"/r/project/directory/upload":{method:"POST",format:"json",upload:true},"/r/project/directory/transfer":{method:"POST",format:"json"},"/r/project/directory/write":{method:"POST",format:"json"},"/r/project/directory/update":{method:"POST",format:"json"},"/r/project/directory/store":{method:"POST",format:"json"},"/r/project/directory/load":{method:"POST",format:"json"},"/r/project/directory/download":{method:"POST",format:"json"},"/r/project/directory/delete":{method:"POST",format:"json"},"/r/project/package/list":{method:"POST",format:"json"},"/r/project/package/attach":{method:"POST",format:"json"},"/r/project/package/detach":{method:"POST",format:"json"},"/r/job/list":{method:"POST",format:"json"},"/r/job/submit":{method:"POST",format:"json"},"/r/job/schedule":{method:"POST",format:"json"},"/r/job/query":{method:"POST",format:"json"},"/r/job/cancel":{method:"POST",format:"json"},"/r/job/delete":{method:"POST",format:"json"},"/r/repository/directory/list":{method:"POST",format:"json"},"/r/repository/directory/create":{method:"POST",format:"json"},"/r/repository/directory/rename":{method:"POST",format:"json"},"/r/repository/directory/copy":{method:"POST",format:"json"},"/r/repository/directory/move":{method:"POST",format:"json"},"/r/repository/directory/update":{method:"POST",format:"json"},"/r/repository/script/list":{method:"POST",format:"json"},"/r/repository/script/execute":{method:"POST",format:"json"},"/r/repository/script/render":{method:"POST",format:"json"},"/r/repository/script/interrupt":{method:"POST",format:"json"},"/r/repository/directory/archive":{method:"POST",format:"json"},"/r/repository/directory/upload":{method:"POST",format:"json",upload:true},"/r/repository/directory/download":{method:"POST",format:"json"},"/r/repository/directory/delete":{method:"POST",format:"json"},"/r/repository/file/list":{method:"POST",format:"json"},"/r/repository/file/fetch":{method:"POST",format:"json"},"/r/repository/file/fetch":{method:"POST",format:"json"},"/r/repository/file/upload":{method:"POST",format:"json",upload:true},"/r/repository/file/transfer":{method:"POST",format:"json"},"/r/repository/file/write":{method:"POST",format:"json"},"/r/repository/file/update":{method:"POST",format:"json"},"/r/repository/file/diff":{method:"POST",format:"json"},"/r/repository/file/revert":{method:"POST",format:"json"},"/r/repository/file/grant":{method:"POST",format:"json"},"/r/repository/file/download":{method:"POST",format:"json"},"/r/repository/file/delete":{method:"POST",format:"json"},"/r/repository/file/copy":{method:"POST",format:"json"},"/r/repository/file/move":{method:"POST",format:"json"},"/r/server/info":{method:"GET",format:"json"}}},{}],2:[function(a,b,c){var d=typeof window!=="undefined",e=a("superagent"),f=a("d.js"),g=a("fs"),h=a("./apis.json"),i=a("./lib/es"),j=a("./lib/utils"),k=a("./lib/lang"),l=a("./lib/logger"),m=a("./lib/queue"),n=a("./lib/emitter"),o=a("./lib/encoder"),p=a("./lib/selfish").Base,q=a("./lib/rinput"),r=a("./lib/rinputs"),s=j.merge;l.setLevel(l.OFF);var t={cors:false,logging:false,sticky:false,cookies:null,host:"",maxRequests:null,events:{},set:function(a,b){if(a!=="set"){this[a]=b}}};var u=["user","project","workspace","execution","directory","repository","packages"];function v(a,b){var c=b.deployr?b.deployr.response.errorCode:b.status,d=this;if(t.events){if(!b.deployr){b=b.text}d=t.events.ctx||d;if(t.events.error){t.events.error.apply(d,[a,b])}if(t.events[c]){t.events[c].apply(d,[a,b])}}}var w=p.extend(n,r,{initialize:function x(a,b){n.initialize.call(this,{});var c=t;if(!h[a]){throw new Error('Invalid API "'+a+'"')}this.api=s({call:a},h[a]);this.link=b||{};this.q=this.link.queue||new m;this.deferred=this.link.deferred||f();this.cookies=this.link.cookies;this.logger=l.get(a,l.OFF);this.params={};this.inputs=[];this.outputs=[];this.rstream=false;this.delayed=false;this.file=null;this.filter=null;this.data({format:this.api.format});this.req=e[this.api.method.toLowerCase()](c.host+"/deployr"+a);this.req.timeout(20*60*1e3);if(d&&t.cors){this.req.withCredentials()}if(this.api.upload){if(!d){this.req.type("multipart/form-data")}}else{this.req.type("form")}},ctx:function(a){this.scope=a||this;return this},share:function(a){if(t.sticky){if(t.cookies){this.cookies=t.cookies.slice(0)}else{if(a){this.cookies=a.slice(0);t.set("cookies",this.cookies)}}}else{this.cookies=a?a.slice(0):this.cookies}return this},getCookies:function(){return this.cookies},delay:function(a){this.delayed=!isNaN(parseFloat(a))&&isFinite(a)?a:true;return this},drain:function(){this.delayed=false;this.q.flush();return this.deferred.promise},promise:function(){this.end();return this.deferred.promise},abort:function(){this.req.abort();this.emit("abort");return this},timeout:function(a){this.req.timeout(a);return this},log:function(a){this.logger.setLevel(a||l.DEBUG);return this},entity:function(a){this.filter=j.inArray(u,a);return this},data:function(a){a=a||{};if(a.rinput||a.rinputs){this.rinput(a.rinput);this.rinputs(a.rinputs)}var b=["rinput","rinputs","__cookies__"];b.forEach(function(b){delete a[b]});this.params=s(this.params,a);return this},attach:function(a,b){if(this.api.upload){this.file=a;if(b){this.data({filename:b})}}return this},stream:function(){this.rstream=!d&&this.api.upload;return this},ensure:function(a){this.deferred.promise.ensure(a);return this.deferred.promise},error:function(a){var b=this;this.on("error",a);this.req.on("error",function(a){b.emit("error",a)});return this},pipe:function(a){var b=this.q,c=this.api;b.add(function(d,e,f){if(e){this.deferred.reject(e);b.flush(d,e,f);this._clear();return}this._prepRequest(d,f);l.info("pipe()",c,this.req);this.logger.info("pipe()",c,this.req);var g=this.req.pipe(a);b.yield(true);g.on("error",function(){});g.on("end",function(){});g.on("data",function(){})},this);if(b.size()<=1){b.flush()}return a},end:function(a){var b=this,c=this.q,d=this.api,e=null,f=this.filter;c.add(function(g,h,i){if(h){this.deferred.reject(h);c.flush(g,h,i);this._clear();return}this._prepRequest(g,i);l.info("io()",d,this.req);this.logger.info("io()",d,this.req);this.req.end(function(i){b.share(b.cookies||i.headers["set-cookie"]);if(b.cookies){l.info("cookies",d,b.cookies);b.logger.info("cookies",d,b.cookies)}h=b._handleError(i);var k=i.body&&i.body.deployr?i.body:i;b.inputs=[];b.outputs=[];if(!h){l.info("end()",d,k,i);b.logger.info("end()",d,k,i);if(f){k=k.deployr.response[f]||k}k.get=function(a){return j.get(k.deployr.response,a)};k.workspace=function(a){return j.workspace(k.deployr.response,a)};if(a){e=a.apply(b.scope,[k,g])}if(c.size()===0){b._clear();b.deferred.resolve(g||k)}e=s(e,{__cookies__:b.cookies})}c.yield(false);c.flush(k,h,e)});c.yield(true)},this,this.delayed);if(!this.delayed&&c.size()<=1){c.flush()}return this},io:function(a){return w.new(a,{cookies:this.cookies,queue:this.q,deferred:this.deferred})},script:function(){var a=j.signature(arguments),b=a.opts,c=a.api,d={cookies:this.cookies,queue:this.q,deferred:this.deferred};if(b.project&&k.isBoolean(b.project)){delete b["project"];return w.new("/r/project/create",d).end(function(a){return{project:a.get("project").project}}).io(c).data(b)}else{return w.new(c,d).data(b)}},release:function(a,b){a=k.isArray(a)?a:[a];var c=this,d=f(),e=!a||!a[0],g=0,h=!e?a.length-1:g,i=this.getCookies();function j(a){if(a===h){if(!b){w.new("/r/user/logout").share(i).error(function(){d.reject(false)}).end(function(){d.resolve(true)}).ensure(function(){c.destroy()})}else{d.resolve(true);c.destroy()}}}if(!e){a.forEach(function(a){w.new("/r/project/close").data({project:a}).share(i).end().ensure(function(){j(g);g++})})}else{j(g)}return d.promise},routputs:function(a){if(a){this.outputs=this.outputs.concat(a)}return this},routput:function(a){if(a){this.routputs([a])}return this},rinputs:function(a){if(a){this.inputs=this.inputs.concat(a)}return this},rinput:function(a){if(a){this.inputs.push(a)}return this},destroy:function(){try{this.emit("destroy");this.offAll();for(var a in this){if(this.hasOwnProperty(a)){this[a]=null;delete this[a]}}}catch(b){}},_clear:function(){this.api=null;this.params={};this.inputs=[];this.outputs=[];this.rstream=false;this.delayed=false;this.file=null;this.filter=null},_prepRequest:function(a,b){var c=this.req,d=this.file;this.share(b?b.__cookies__:null);if(b){this.data(b)}if(this.inputs.length>0){this.data({inputs:o.encode(this.inputs)})}if(this.outputs.length>0){this.data({robjects:this.outputs.join()})}if(this.cookies){this.cookies.forEach(function(a){c.set("Cookie",a)})}if(this.api.upload){for(var e in this.params){c.field(e,this.params[e]?this.params[e]+"":"")}c.attach("file",this.rstream?g.createReadStream(d):d)}else{c[this.api.method==="GET"?"query":"send"](this.params)}},_handleError:function(a){var b=a.status,c=a.body&&a.body.deployr?a.body:a,d=b!==200||c.deployr&&!c.deployr.response.success;if(d){c={get:function(a){return j.get(this.deployr.response,a)},deployr:{response:{success:false,call:this.api["call"],errorCode:c.deployr?c.deployr.response.errorCode:b,error:c.deployr?c.deployr.response.error:c.text}}};l.error("error()",this.api,c,a);this.logger.error("error()",this.api,c,a);v(this.api["call"],c);this.emit("error",c);this.emit("deployr-io:"+c.deployr.response.errorCode,c);this.deferred.reject(c)}return d}});if(d){window.Revolution=window.Revolution||a("./lib/deprecated")}b.exports={configure:function(a){a=a||{};for(var b in a){t.set(b,a[b])}if(!t.sticky){t.set("cookies",null)}l.setLevel(t.logging?l.DEBUG:l.OFF);return this},io:function(a){return w.new(a)},auth:function(a,b){var c={username:a,password:b};return w.new("/r/user/login").data(c).end()},script:function(){var a=j.signature(arguments),b=a.opts,c=a.api;if(b.project&&k.isBoolean(b.project)){delete b["project"];return w.new("/r/project/create").end(function(a){return{project:a.get("project").project}}).io(c).data(b)}else{return w.new(c).data(b)}},pipeline:function(a){var b=this,c=f(),d=new m,e=[],g=[],h=null,i={sticky:t.sticky,cookies:t.cookies};a=a.slice(0);b.configure({sticky:true});function j(){d.add(function(){a.shift().drain().then(function(a){e.push(a);g.push(h);if(d.isEmpty()){b.configure(i);c.resolve({results:e,errors:g})}d.take()},function(a){e.push(h);g.push(a);if(d.isEmpty()&&e.length===0){b.configure(i);c.reject(g)}d.take()})},null,true)}for(var k=0;k<a.length;k++){j()}d.take();return c.promise},es:function(a){var b=i.new(t.host,a);if(a&&a.username&&a.password){var c=this.auth(a.username,a.password);c.ensure(function(){b.share(c.getCookies());b.flush()})}return b},RInput:{numeric:function(a,b){return q.new(a,b).numeric()},integer:function(a,b){return q.new(a,b).integer()},logical:function(a,b){return q.new(a,b).logical()},character:function(a,b){return q.new(a,b).character()},date:function(a,b){return q.new(a,b).date()},posixct:function(a,b){return q.new(a,b).posixct()},numericVector:function(a,b){return q.new(a,b).numericVector()},integerVector:function(a,b){return q.new(a,b).integerVector()},logicalVector:function(a,b){return q.new(a,b).logicalVector()},characterVector:function(a,b){return q.new(a,b).characterVector()},dateVector:function(a,b){return q.new(a,b).dateVector()},posixctVector:function(a,b){return q.new(a,b).posixctVector()},list:function(a,b){return q.new(a,b).list()},dataframe:function(a,b){return q.new(a,b).dataframe()},factor:function(a,b,c,d){var e={levels:c,labels:d};return q.new(a,b,e).factor()},ordered:function(a,b,c,d){var e={levels:c,labels:d};return q.new(a,b,e).ordered()},numericMatrix:function(a,b){return q.new(a,b).numericMatrix()},integerMatrix:function(a,b){return q.new(a,b).integerMatrix()},logicalMatrix:function(a,b){return q.new(a,b).logicalMatrix()},characterMatrix:function(a,b){return q.new(a,b).characterMatrix()}}}},{"./apis.json":1,"./lib/deprecated":3,"./lib/emitter":4,"./lib/encoder":5,"./lib/es":6,"./lib/lang":7,"./lib/logger":8,"./lib/queue":10,"./lib/rinput":11,"./lib/rinputs":12,"./lib/selfish":14,"./lib/utils":15,"d.js":18,fs:16,superagent:19}],3:[function(a,b,c){var d=a("./lang"),e=a("./selfish").Base,f=a("./rinput");var g,h,i={},j=["user","project","workspace","execution","directory","repository","packages"];var k={ENDPOINT_WHITELIST:{login:"/r/user/login",logout:"/r/user/logout",projectCreate:"/r/project/create",projectClose:"/r/project/close",projectAboutUpdate:"/r/project/about/update",projectSave:"/r/project/save",projectSaveAs:"/r/project/saveas",clientProjectSave:"/r/client/project/save",clientProjectClose:"/r/client/project/close"},session:{},config:{},setUnloadConfig:function(a){a=a||{};this.config={disableautosave:a.disableautosave||true,dropworkspace:a.dropworkspace||true,dropdirectory:a.dropdirectory||true,drophistory:a.drophistory||true,flushhistory:a.flushhistory||true}},setSession:function(a){this.session=a},setProject:function(a){this.session.project=a},clearSession:function(){this.session={}},clearProject:function(){this.session.project=null},unloadHandler:function(){try{var a=this.session.project;if(a){var b=this._config;b.project=a.id;b.projectcookie=a.cookie;deployr.io("/r/project/close").data(b).sync().end()}}catch(c){throw new Error(c)}}};function l(a,b){var c=b||globalConfig.entity;if(c){var d=a.deployr.response,e=j;for(var f=0;f<e.length;f++){var g=e[f];if(d[g]&&c[g]){if(c[g].parser){var h=c[g].scope||this;d[g]=c[g].parser.call(h,d[g])}}}}return a}function m(a,b,c){var d=a.deployr.response,e=k.ENDPOINT_WHITELIST;switch(b){case e.login:k.setSession({httpcookie:d.httpcookie,user:d.user,limits:d.limits,project:null});break;case e.logout:k.clearSession();break;case e.projectClose:case e.clientProjectClose:k.clearProject();break;case e.projectCreate:case e.projectAboutUpdate:case e.projectSave:case e.projectSaveAs:case e.clientProjectSave:var f=d.project;k.setProject({id:f.project,cookie:f.cookie});break}g.Event.fire("DeployR:endpointChange",{response:a,endpoint:b,args:c})}function n(a){a=a.replace("/r/","");return a.toLowerCase().replace(/\/(.)/g,function(a,b){return b.toUpperCase()})}function o(a){var b=[];for(var c=0;c<a.length;c++){b.push(a[c].normalize())}return b}var p=e.extend({initialize:function(a,b,c){this.type=a;this.rclass=b;this.rinput=c},getType:function(){return this.type},getRClass:function(){return this.rclass},getName:function(){return this.rinput.name},getValue:function(){return this.rinput.value},getLevels:function(){return this.rinput.levels},getLabels:function(){return this.rinput.labels},getOrdered:function(){return this.rinput.ordered},normalize:function(){return this.rinput}});function q(a){}function r(a){}q.prototype={events:{},scope:null,on:function(a,b){if(a in this.events===false){this.events[a]=[]}this.events[a].push(b);r('Emitter.on("'+a+'")');return this},emit:function(a){if(a in this.events===false){return this}for(var b=0;b<this.events[a].length;b++){r('Fired event: "'+a+'"');this.events[a][b].apply(this.scope||this,Array.prototype.slice.call(arguments,1))}return this},removeAllListeners:function(a){if(!a){for(var b in this.events){delete this.events[b]}}else{if(a in this.events===false){return this}delete this.events[a]}return this},removeListenerAt:function(a,b){var c=this.events[a],d=c.slice(b+1);c.length=b;c.push.apply(c,d);this.events[a]=c},off:function(a,b){if(a in this.events===false){return this}if(!b){return this.removeAllListeners(a)}else{for(var c=0;c<this.events[a].length;c++){if(this.events[a][c]==b){this.removeListenerAt(a,c);return this}}}return this}};h=new q;g={version:a("../package").version,Event:{on:function(a,b,c){h.on(a,b,c)},detach:function(a,b,c){h.off(a,b)}},RDataFactory:{createNumeric:function(a,b){return p.new("primitive","numeric",f.new(a,b).numeric())},createInteger:function(a,b){return p.new("primitive","integer",f.new(a,b).integer())},createBoolean:function(a,b){return p.new("primitive","numeric",f.new(a,b).logical())},createString:function(a,b){return p.new("primitive","character",f.new(a,b).character())},createDate:function(a,b){return p.new("date","Date",f.new(a,b).date())},createPOSIXDate:function(a,b){return p.new("date","POSIXct",f.new(a,b).posixct())},createNumericVector:function(a,b){return p.new("vector","numeric",f.new(a,b).numericVector())},createIntegerVector:function(a,b){return p.new("vector","integer",f.new(a,b).integerVector())},createBooleanVector:function(a,b){return p.new("vector","logical",f.new(a,b).logicalVector())},createStringVector:function(a,b){return p.new("vector","character",f.new(a,b).characterVector())},createDateVector:function(a,b){return p.new("type","Date",f.new(a,b).dateVector())},createPOSIXDateVector:function(a,b){return p.new("vector","POSIXct",f.new(a,b).posixctVector())},createList:function(a,b){return p.new("list","list",f.new(a,b).list())},createDataframe:function(a,b){return p.new("dataframe","data.frame",f.new(a,b).dataframe())},createFactor:function(a,b,c,d,e){var g={levels:d,labels:e};if(c){return p.new("factor","factor",f.new(a,b,g).ordered())}else{return p.new("factor","factor",f.new(a,b,g).factor())}},createNumericMatrix:function(a,b){return p.new("matrix","matrix",f.new(a,b).numericMatrix())},createIntegerMatrix:function(a,b){return p.new("matrix","matrix",f.new(a,b).integerMatrix())},createBooleanMatrix:function(a,b){return p.new("matrix","matrix",f.new(a,b).logicalMatrix())},createStringMatrix:function(a,b){return p.new("matrix","matrix",f.new(a,b).characterMatrix())}},DeployR:{init:function(a){a=a||{};if(a.compatibility){}if(a.events){var b=a.events;if(b.unload){k.setUnloadConfig(b.unload);g.Event.on("deployR:unload",k.unloadHandler,k)}if(b.globalIO){var c=b.globalIO.scope||window,d=b.globalIO.lifecycle,e=b.globalIO.statusCode;if(d){for(var f in d){g.Event.on("deployR-io:"+f,d[f],c)}}if(e){for(var f in e){g.Event.on("deployR-io:"+f,e[f],c)}}}}deployr.configure({host:a.deployrURI,cors:a.deployrURI?true:false,logging:a.logging,sticky:true})},io:function(a,b,c){if(console){console.warn('"'+n(a)+'()" API is now deprecated.')}c=c||{};b=b||{};var d=b.transaction||{},e=d["arguments"],f=d.statusCode||{},g=c.scope||window,i=b.robjects,j=b.inputs;if(b.transaction){delete b.transaction}if(b.method){delete b.method}if(b.on){delete b.on}if(b.format){delete b.format}if(b.inputs){delete b.inputs}if(b.robjects){delete b.robjects}var k=deployr.io(a).data(b||{}).error(function(b){h.emit("deployR-io:failure",[b,a,e]);if(c.failure){c.failure.apply(g,[b,a,e])}h.emit("deployR-io:"+code,[b,a,e])});if(j){k.rinputs(o(j))}if(i){k.routputs(i)}if(d.sync){k.sync()}if(d.timeout){k.timeout(d.timeout)}if(f){for(var m in f){k.on("deployr-io:"+m,function(b){var c=f;var d=b.deployr.response.error;var h=b.deployr.response.errorCode;c[h].apply(g,[b,h,d,a,e])})}}h.emit("deployR-io:start");if(c.start){c.start.apply(g,[a,e])}k.end(function(b){h.emit("deployR-io:complete");if(c.complete){c.complete.apply(g,[b,a,e])}if(d.entity){b=l(b,d.entity)}h.emit("deployR-io:success",[b,a]);if(c.success){c.success.apply(g,[b,a,e])}h.emit("deployR-io:end",[b,a]);if(c.end){c.end.apply(g,[b,a,e])}});return k},parseInputs:function(a){return a},projectWorkspaceList:function(a,b){return this.io("/r/project/workspace/list",a,b)},projectWorkspaceGet:function(a,b){return this.io("/r/project/workspace/get",a,b)},projectWorkspaceUpload:function(a,b){a.format="text";var c={data:a,method:"POST",form:{id:a.formId},on:b};return this.io("/r/project/workspace/upload",a,b)},projectWorkspaceTransfer:function(a,b){return this.io("/r/project/workspace/transfer",a,b)},projectWorkspacePush:function(a,b){return this.io("/r/project/workspace/push",a,b)},projectWorkspaceSave:function(a,b){return this.io("/r/project/workspace/save",a,b)},projectWorkspaceStore:function(a,b){return this.io("/r/project/workspace/store",a,b)},projectWorkspaceLoad:function(a,b){return this.io("/r/project/workspace/load",a,b)},projectWorkspaceDelete:function(a,b){return this.io("/r/project/workspace/delete",a,b)},projectCreate:function(a,b){return this.io("/r/project/create",a,b)},projectPool:function(a,b){return this.io("/r/project/pool",a,b)},projectRecycle:function(a,b){return this.io("/r/project/recycle",a,b)},projectList:function(a,b){return this.io("/r/project/list",a,b)},projectPing:function(a,b){return this.io("/r/project/ping",a,b)},projectAbout:function(a,b){return this.io("/r/project/about",a,b)},projectAboutUpdate:function(a,b){return this.io("/r/project/about/update",a,b)},projectSave:function(a,b){return this.io("/r/project/save",a,b)},projectSaveas:function(a,b){return this.io("/r/project/saveas",a,b)},projectClose:function(a,b){return this.io("/r/project/close",a,b)},projectGrant:function(a,b){return this.io("/r/project/grant",a,b)},projectImport:function(a,b){a.format="text";var c={data:a,method:"POST",form:{id:a.formId},on:b};return this.io("/r/project/import",a,b)},projectExport:function(a,b){return this.io("/r/project/export",a,b)},projectDelete:function(a,b){return this.io("/r/project/delete",a,b)},projectExecuteCode:function(a,b){return this.io("/r/project/execute/code",a,b)},projectExecuteScript:function(a,b){return this.io("/r/project/execute/script",a,b)},projectExecuteInterrupt:function(a,b){return this.io("/r/project/execute/interrupt",a,b)},projectExecuteConsole:function(a,b){return this.io("/r/project/execute/console",a,b)},projectExecuteHistory:function(a,b){return this.io("/r/project/execute/history",a,b)},projectExecuteFlush:function(a,b){return this.io("/r/project/execute/flush",a,b)},projectExecuteResultList:function(a,b){return this.io("/r/project/execute/result/list",a,b)},projectExecuteResultDownload:function(a,b){return this.io("/r/project/execute/result/download",a,b)},projectExecuteResultDelete:function(a,b){return this.io("/r/project/execute/result/delete",a,b)},projectDirectoryList:function(a,b){return this.io("/r/project/directory/list",a,b)},projectDirectoryUpload:function(a,b){a.format="text";var c={data:a,method:"POST",form:{id:a.formId},on:b};return this.io("/r/project/directory/upload",a,b)},projectDirectoryTransfer:function(a,b){return this.io("/r/project/directory/transfer",a,b)},projectDirectoryWrite:function(a,b){return this.io("/r/project/directory/write",a,b)},projectDirectoryUpdate:function(a,b){return this.io("/r/project/directory/update",a,b)},projectDirectoryStore:function(a,b){return this.io("/r/project/directory/store",a,b)},projectDirectoryLoad:function(a,b){return this.io("/r/project/directory/load",a,b)},projectDirectoryDownload:function(a,b){return this.io("/r/project/directory/download",a,b)},projectDirectoryDelete:function(a,b){return this.io("/r/project/directory/delete",a,b)},projectPackageList:function(a,b){return this.io("/r/project/package/list",a,b)},projectPackageAttach:function(a,b){return this.io("/r/project/package/attach",a,b)},projectPackageDetach:function(a,b){return this.io("/r/project/package/detach",a,b)},userLogin:function(a,b){return this.io("/r/user/login",a,b)},userLogout:function(a,b){return this.io("/r/user/logout",a,b)},userAbout:function(a){return this.io("/r/user/about",{},a)},userAutosave:function(a,b){return this.io("/r/user/autosave",a,b)},repositoryScriptList:function(a){return this.io("/r/repository/script/list",{},a)},repositoryScriptExecute:function(a,b){return this.io("/r/repository/script/execute",a,b)},repositoryScriptRender:function(a,b){return this.io("/r/repository/script/render",a,b)},repositoryScriptInterrupt:function(a){return this.io("/r/repository/script/interrupt",config,a)},repositoryFileList:function(a,b){return this.io("/r/repository/file/list",a,b)},repositoryFileUpload:function(a,b){a.format="text";var c={data:a,method:"POST",form:{id:a.formId},on:b};return this.io("/r/repository/file/upload",a,b)},repositoryFileTransfer:function(a,b){return this.io("/r/repository/file/transfer",a,b)},repositoryFileWrite:function(a,b){return this.io("/r/repository/file/write",a,b)},repositoryFileUpdate:function(a,b){return this.io("/r/repository/file/update",a,b)},repositoryFileRevert:function(a,b){return this.io("/r/repository/file/revert",a,b)},repositoryFileDiff:function(a,b){return this.io("/r/repository/file/diff",a,b)},repositoryFileGrant:function(a,b){return this.io("/r/repository/file/grant",a,b)},repositoryFileDownload:function(a,b){return this.io("/r/repository/file/download",a,b)},repositoryFileDelete:function(a,b){return this.io("/r/repository/file/delete",a,b)},repositoryFileFetch:function(a,b){return this.io("/r/repository/file/fetch",a,b)},repositoryFileCopy:function(a,b){return this.io("/r/repository/file/copy",a,b)},repositoryFileMove:function(a,b){return this.io("/r/repository/file/move",a,b)},repositoryDirectoryList:function(a,b){return this.io("/r/repository/directory/list",a,b)},repositoryDirectoryCreate:function(a,b){return this.io("/r/repository/directory/create",a,b)},repositoryDirectoryRename:function(a,b){return this.io("/r/repository/directory/rename",a,b)},repositoryDirectoryCopy:function(a,b){return this.io("/r/repository/directory/copy",a,b)},repositoryDirectoryMove:function(a,b){return this.io("/r/repository/directory/move",a,b)},repositoryDirectoryUpdate:function(a,b){return this.io("/r/repository/directory/update",a,b)},repositoryDirectoryArchive:function(a,b){return this.io("/r/repository/directory/archive",a,b)},repositoryDirectoryUpload:function(a,b){a=a||{};a.format="text";var c={data:a,method:"POST",form:{id:a.formId},on:b};return this.io("/r/repository/directory/upload",a,b)},repositoryDirectoryDownload:function(a,b){return this.io("/r/repository/directory/download",a,b)},repositoryDirectoryDelete:function(a,b){return this.io("/r/repository/directory/delete",a,b)},jobList:function(a,b){return this.io("/r/job/list",a,b)},jobSubmit:function(a,b){return this.io("/r/job/submit",a,b)},jobSchedule:function(a,b){return this.io("/r/job/schedule",a,b)},jobQuery:function(a,b){return this.io("/r/job/query",a,b)},jobCancel:function(a,b){return this.io("/r/job/list",a,b)},jobDelete:function(a,b){return this.io("/r/job/delete",a,b)}}};b.exports=g},{"../package":22,"./lang":7,"./rinput":11,"./selfish":14}],4:[function(a,b,c){var d=a("./selfish").Base;function e(a){}b.exports=d.extend({initialize:function(){this.events={};this.scope=null},on:function(a,b){if(a in this.events===false){this.events[a]=[]}this.events[a].push(b);e('Emitter.on("'+a+'")');return this},emit:function(a){if(a in this.events===false){return this}for(var b=0;b<this.events[a].length;b++){e('Fired event: "'+a+'"');this.events[a][b].apply(this.scope||this,Array.prototype.slice.call(arguments,1))}return this},offAll:function(a){if(!a){for(var b in this.events){delete this.events[b]}}else{if(a in this.events===false){return this}delete this.events[a]}return this},offAt:function(a,b){var c=this.events[a],d=c.slice(b+1);c.length=b;c.push.apply(c,d);this.events[a]=c},off:function(a,b){if(a in this.events===false){return this}if(!b){return this.offAll(a)}else{for(var c=0;c<this.events[a].length;c++){if(this.events[a][c]==b){this.offAt(a,c);return this}}}return this}})},{"./selfish":14}],5:[function(a,b,c){var d=a("./lang"),e=a("./rtypes"),f=e.r,g=e.deployr;function h(a,b){var c=[];for(var d=0;d<a.length;d++){c.push(i(a[d],b))}return c}function i(a,b){var c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate(),f=a.getHours(),h=a.getMinutes(),i=a.getSeconds(),j=a.getTimezoneOffset(),k="";d=d<10?"0"+d:d;f=f<10?"0"+f:f;h=h<10?"0"+h:h;i=i<10?"0"+i:i;k=c+"-"+d+"-"+e;function l(a,b,c){var d=""+Math.abs(a),e=a>=0;while(d.length<b){d="0"+d}return(e?c?"+":"":"-")+d}if(b===g.RPOSIX_DATE||b===g.RPOSIX_DATE_VECTOR){var m=f+":"+h+":"+i,n=-j,o="+";if(n<0){n=-n;o="-"}j=o+l(n/60,2)+""+l(n%60,2);k+=" "+m+" "+j}return k}function j(a,b){var c=a.value;for(var f=0;f<c.length;f++){var k=c[f];if(k.type===g.RDATAFRAME){b=j(k,b)}else{if(e.isDate(k.type)){if(d.isArray(k.value)){k.value=h(k.value,k.type)}else{k.value=i(k.value,k.type)}}k.type=e.deployrToR(k.type);b.value.push(k)}}return b}function k(a){var b={type:f.DATAFRAME,value:[],name:a.name},c=a.value;for(var k=0;k<c.length;k++){var l=c[k];if(l.type===g.RDATAFRAME){b=j(l,b)}else{if(e.isDate(l.type)){if(d.isArray(l.value)){l.value=h(l.value,l.type)}else{l.value=i(l.value,l.type)}}l.type=e.deployrToR(l.type);b.value.push(l)}}return b}function l(a){var b={type:f.LIST,value:[],name:a.name},c=a.value,d;for(var e=0;e<c.length;e++){var j=c[e];switch(j.type){case g.RDATAFRAME:d=k(j);break;case g.RLIST:d=l(j);break;case g.RNUMERIC_MATRIX:case g.RINTEGER_MATRIX:case g.RBOOLEAN_MATRIX:case g.RSTRING_MATRIX:d={name:j.name,type:f.MATRIX,value:j.value};break;case g.RDATE:case g.RPOSIX_DATE:d={name:j.name,type:f.DATE,format:j.format,value:i(j.value,j.type)};break;case g.RFACTOR:case g.RORDERED:d={name:j.name,type:f.FACTOR,ordered:j.ordered,labels:j.labels,levels:j.levels,value:j.value};break;case g.RSTRING:case g.RBOOLEAN:case g.RNUMERIC:case g.RINTEGER:d={name:j.name,type:f.PRIMITIVE,value:j.value};break;case g.RNUMERIC_VECTOR:case g.RINTEGER_VECTOR:case g.RBOOLEAN_VECTOR:case g.RSTRING_VECTOR:d={name:j.name,type:f.VECTOR,value:j.value};break;case g.RDATE_VECTOR:case g.RPOSIX_DATE_VECTOR:d={name:j.name,type:f.VECTOR,value:h(j.value,j.type),format:j.format};break;default:throw new Error('No RDataType found for "'+j.type+'"');break}b.value.push(d)}return b}b.exports={encode:function(a){var b={};
for(var c=0;c<a.length;c++){var d=a[c];switch(d.type){case g.RDATAFRAME:b[d.name]=k(d);break;case g.RLIST:b[d.name]=l(d);break;case g.RNUMERIC_MATRIX:case g.RINTEGER_MATRIX:case g.RBOOLEAN_MATRIX:case g.RSTRING_MATRIX:b[d.name]={type:f.MATRIX,value:d.value};break;case g.RDATE:case g.RPOSIX_DATE:b[d.name]={type:f.DATE,format:d.format,value:i(d.value,d.type)};break;case g.RFACTOR:case g.RORDERED:b[d.name]={type:f.FACTOR,ordered:d.ordered,labels:d.labels,levels:d.levels,value:d.value};break;case g.RSTRING:case g.RBOOLEAN:case g.RNUMERIC:case g.RINTEGER:b[d.name]={type:f.PRIMITIVE,value:d.value};break;case g.RNUMERIC_VECTOR:case g.RINTEGER_VECTOR:case g.RBOOLEAN_VECTOR:case g.RSTRING_VECTOR:b[d.name]={type:f.VECTOR,value:d.value};break;case g.RDATE_VECTOR:case g.RPOSIX_DATE_VECTOR:b[d.name]={type:f.VECTOR,value:h(d.value,d.type),format:d.format};break;default:throw new Error('No RDataType found for "'+d.type+'"');break}}return JSON.stringify(b)}}},{"./lang":7,"./rtypes":13}],6:[function(a,b,c){var d=a("./optional"),e=d("ws"),f=a("./queue"),g=a("./emitter"),h=a("./selfish").Base,i=a("./utils").merge;var j=h.extend(g,{initialize:function k(a,b){g.initialize.call(this,{});this.host=a;this.options=b||{};this.options.log=this.options.log||this.LOG.error;this.ws=null;this.q=new f;this.channel={}},LOG:{info:"info",debug:"debug",error:"error"},open:function(a){var b=this,c=(this.host||"")+"/deployr/r/event/stream?",d=[];a=a||{};a.headers=a.headers||{};a=this.options=i(a,this.channel);this.cookies=!this.cookies?a.headers.Cookie:this.cookies;if(a.project){d.push("project="+a.project)}else{if(a.job){d.push("job="+a.job)}}if(a.management){d.push("managementEventOnly=true")}else{if(a.httponly){d.push("httpEventOnly=true")}else{if(a.revoonly){d.push("revoEventOnly=true")}}}c+=d.join("&").substr(0);c=c.replace(/^http/,"ws");this.q.yield(true);this.q.add(function(){var a=this.cookies?{Cookie:this.cookies}:{};this.emit("es:connecting",{uri:c,headers:a});var d=new e(c,"http",{headers:a});d.onopen=function(a){b.emit("es:open",a)};var f="";d.onmessage=function(a){try{if(a.data.split("!|!")[1]){f=f+a.data.split("!|!")[1];a=JSON.parse(f);f="";var c=a.deployr.response.event.type;b.emit("es:"+c.replace("Event",""),a)}}catch(d){}};d.onerror=function(a){b.emit("es:error",a)};d.onclose=function(a){b.emit("es:disconnect",a)};this.ws=d},this);if(a.force){this.flush()}return this},close:function(){if(this.ws){this.ws.close()}return this},error:function(a){this.on("es:error",a);return this},all:function(){this.channel={revoonly:true};return this},session:function(){this.channel={httponly:true};return this},project:function(a){this.channel={project:a};return this},job:function(a){this.channel={job:a};return this},management:function(){this.channel={management:true};return this},flush:function(){this.q.yield(false);this.q.flush()},share:function(a){this.cookies=a}});b.exports=j},{"./emitter":4,"./optional":9,"./queue":10,"./selfish":14,"./utils":15}],7:[function(a,b,c){var d={},e=Object.prototype.toString,f={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},g=false;d.isNull=function(a){return a===null};d.isUndefined=function(a){return typeof a==="undefined"};d.isObject=function(a,b){var c=typeof a;return a&&(c==="object"||!b&&(c==="function"||d.isFunction(a)))||false};d.isArray=!g&&Array.isArray||function(a){return d.type(a)==="array"};d.isFunction=function h(a){return typeof a==="function"};d.isBoolean=function(a){return typeof a==="boolean"};d.isDate=function(a){return d.type(a)==="date"&&a.toString()!=="Invalid Date"&&!isNaN(a)};d.isNumber=function(a){return typeof a==="number"&&isFinite(a)};d.isString=function(a){return typeof a==="string"};d.type=function(a){return f[typeof a]||f[e.call(a)]||(a?"object":"null")};b.exports=d},{}],8:[function(a,b,c){var d={},e={},f;function g(a,b){if(!console){return}function c(a){var b="========================================================="+"=========================================================\n",c=0;if(a===d.DEBUG||a===d.ERROR)c=8;else if(a===d.INFO||a===d.WARN)c=8;else c=7;return{start:b.substring(c),end:b}}var e,f=Array.prototype.slice.call(a,0),g=b.name,h=b.level===d.ERROR,i=c(b.level);if(b.level===d.WARN&&console.warn){e="warn"}else if(b.level===d.ERROR&&console.error){e="error"}else if(b.level===d.INFO&&console.info){e="info"}else{e="log"}f.unshift("["+(h?d.ERROR.name:g)+"] "+i.start);f.push(i.end);console[e](f[0],[f[1]+" ---> "+f[2]["call"]]);for(var j=2;j<f.length;j++){console.log(f[j])}}function h(a,b,c){this.id=a;this.context=b||d.DEBUG}h.prototype={log:function(a,b){if(a.value>=this.context.value){g(b,{level:a,name:this.context.name,value:this.context.value})}},debug:function(){this.log(d.DEBUG,arguments)},error:function(){this.log(d.ERROR,arguments)},info:function(){this.log(d.INFO,arguments)},warn:function(){this.log(d.WARN,arguments)},setLevel:function(a){if(a&&"value"in a){this.context=a}}};d.DEBUG={value:1,name:"DEBUG"};d.INFO={value:2,name:"INFO"};d.WARN={value:4,name:"WARN"};d.ERROR={value:8,name:"ERROR"};d.OFF={value:99,name:"OFF"};d.setLevel=function(a){f.setLevel(a)};d.debug=function(){f.debug.apply(f,arguments)};d.info=function(){f.info.apply(f,arguments)};d.warn=function(){f.warn.apply(f,arguments)};d.error=function(){f.error.apply(f,arguments)};d.get=function(a,b,c){return e[a]||function(){e[a]=new h(a,b,c);return e[a]}()};f=d.get("global");b.exports=d},{}],9:[function(a,b,c){b.exports=function(b){try{return a(b)}catch(c){}}},{}],10:[function(a,b,c){function d(){this.emptyCallback=null;this.callbacks=[];this.yielded=false;this.response=null;this.responseChain=[]}d.prototype={add:function(a,b,c){if(!this.yielded&&!c){a.apply(b||this,[this.response])}else{this.callbacks.push({fn:a,ctx:b})}},size:function(){return this.callbacks.length},isEmpty:function(){return this.callbacks.length===0},empty:function(a,b){this.emptyCallback={fn:a,ctx:b}},"yield":function(a){this.yielded=a},take:function(a,b,c){var d;if(a){this.response=a;this.responseChain.push(a)}if(!this.yielded&&this.callbacks[0]){d=this.callbacks.shift();d.fn.apply(d.ctx||this,[this.responseChain,b,c]);if(this.callbacks[0]&&this.emptyCallback){this.emptyCallback.fn.call(this.emptyCallback.ctx||this)}}},flush:function(a,b,c){if(a){this.response=a;this.responseChain.push(a)}while(this.callbacks[0]){if(this.yielded){break}var d=this.callbacks.shift();d.fn.apply(d.ctx||this,[this.responseChain,b,c]);if(this.callbacks[0]&&this.emptyCallback){this.emptyCallback.fn.call(this.emptyCallback.ctx||this)}}}};b.exports=d},{}],11:[function(a,b,c){var d=a("./selfish").Base,e=a("./rtypes");b.exports=d.extend(e,{initialize:function f(a,b,c){this.name=a;this.value=b;this.options=c||{}},numeric:function(){return this.assert({type:this.deployr.RNUMERIC,name:this.name,value:this.value,toString:this.toString})},integer:function(){return this.assert({type:this.deployr.RINTEGER,name:this.name,value:this.value,toString:this.toString})},logical:function(){return this.assert({type:this.deployr.RBOOLEAN,name:this.name,value:this.value,toString:this.toString})},character:function(){return this.assert({type:this.deployr.RSTRING,name:this.name,value:this.value,toString:this.toString})},date:function(){return this.assert({type:this.deployr.RDATE,name:this.name,value:this.value,format:"yyyy-MM-dd",toString:this.toString})},posixct:function(){return this.assert({type:this.deployr.RPOSIX_DATE,name:this.name,value:this.value,format:"yyyy-MM-dd HH:mm:ss Z",toString:this.toString})},numericVector:function(){return this.assert({type:this.deployr.RNUMERIC_VECTOR,name:this.name,value:this.value,toString:this.toString})},integerVector:function(){return this.assert({type:this.deployr.RINTEGER_VECTOR,name:this.name,value:this.value,toString:this.toString})},logicalVector:function(){return this.assert({type:this.deployr.RBOOLEAN_VECTOR,name:this.name,value:this.value,toString:this.toString})},characterVector:function(){return this.assert({type:this.deployr.RSTRING_VECTOR,name:this.name,value:this.value,toString:this.toString})},dateVector:function(){return this.assert({type:this.deployr.RDATE_VECTOR,name:this.name,value:this.value,format:"yyyy-MM-dd",toString:this.toString})},posixctVector:function(){return this.assert({type:this.deployr.RPOSIX_DATE_VECTOR,name:this.name,value:this.value,format:"yyyy-MM-dd HH:mm:ss Z",toString:this.toString})},list:function(){return this.assert({type:this.deployr.RLIST,name:this.name,value:this.value,toString:this.toString})},dataframe:function(){return this.assert({type:this.deployr.RDATAFRAME,name:this.name,value:this.value,toString:this.toString})},factor:function(){var a=this.options;return this.assert({type:this.deployr.RFACTOR,name:this.name,value:this.value,ordered:false,levels:a.levels,labels:a.labels,toString:this.toString})},ordered:function(){var a=this.options;return this.assert({type:this.deployr.RORDERED,name:this.name,value:this.value,ordered:true,levels:a.levels,labels:a.labels,toString:this.toString})},numericMatrix:function(){return this.assert({type:this.deployr.RNUMERIC_MATRIX,name:this.name,value:this.value,toString:this.toString})},integerMatrix:function(){return this.assert({type:this.deployr.RINTEGER_MATRIX,name:this.name,value:this.value,toString:this.toString})},logicalMatrix:function(){return this.assert({type:this.deployr.RBOOLEAN_MATRIX,name:this.name,value:this.value,toString:this.toString})},characterMatrix:function(){return this.assert({type:this.deployr.RSTRING_MATRIX,name:this.name,value:this.value,toString:this.toString})},toString:function(){var a=this.options||{},b=a.levels?"[ levels = "+a.levels+"]":"",c=a.labels?"[ labels = "+a.labels+"]":"";return"[ name = "+this.name+" ] "+"[ value = "+this.value+" ] "+"[ type = "+this.type+" ] "+b+c}})},{"./rtypes":13,"./selfish":14}],12:[function(a,b,c){var d=a("./selfish").Base,e=a("./rtypes"),f=a("./lang"),g=a("./rinput");function h(a,b,c,d){var e;if(f.isObject(b)){e=b;if(!e.type!==a){throw new Error("IllegalArgumentError:"+'Expecting "'+a+'" but found "'+e.type+'"')}}else{e=g.new(b,c,d)[a]()}return e}b.exports=d.extend(e,{numeric:function(a,b){this.inputs.push(h(this.deployr.RNUMERIC,a,b));return this},integer:function(a,b){this.inputs.push(h(this.deployr.RINTEGER,a,b));return this},logical:function(a,b){this.inputs.push(h(this.deployr.RBOOLEAN,a,b));return this},character:function(a,b){this.inputs.push(h(this.deployr.RSTRING,a,b));return this},date:function(a,b){this.inputs.push(h(this.deployr.RDATE,a,b));return this},posixct:function(a,b){this.inputs.push(h(this.deployr.RPOSIX_DATE,a,b));return this},numericVector:function(a,b){this.inputs.push(h(this.deployr.RNUMERIC_VECTOR,a,b));return this},integerVector:function(a,b){this.inputs.push(h(this.deployr.RINTEGER_VECTOR,a,b));return this},logicalVector:function(a,b){this.inputs.push(h(this.deployr.RBOOLEAN_VECTOR,a,b));return this},characterVector:function(a,b){this.inputs.push(h(this.deployr.RSTRING_VECTOR,a,b));return this},dateVector:function(a,b){this.inputs.push(h(this.deployr.RDATE_VECTOR,a,b));return this},posixctVector:function(a,b){this.inputs.push(h(this.deployr.RPOSIX_DATE_VECTOR,a,b));return this},list:function(a,b){this.inputs.push(h(this.deployr.RLIST,a,b));return this},dataframe:function(a,b){this.inputs.push(h(this.deployr.RDATAFRAME,a,b));return this},factor:function(a,b,c,d){var e={levels:c,labels:d};this.inputs.push(h(this.deployr.RFACTOR,a,b,e));return this},ordered:function(a,b,c,d){var e={levels:c,labels:d};this.inputs.push(h(this.deployr.RORDERED,a,b,e));return this},numericMatrix:function(a,b){this.inputs.push(h(this.deployr.RNUMERIC_MATRIX,a,b));return this},integerMatrix:function(a,b){this.inputs.push(h(this.deployr.RINTEGER_MATRIX,a,b));return this},logicalMatrix:function(a,b){this.inputs.push(h(this.deployr.RBOOLEAN_MATRIX,a,b));return this},characterMatrix:function(a,b){this.inputs.push(h(this.deployr.RSTRING_MATRIX,a,b));return this}})},{"./lang":7,"./rinput":11,"./rtypes":13,"./selfish":14}],13:[function(a,b,c){var d=a("./selfish").Base,e=a("./lang"),f={};b.exports=d.extend({r:{PRIMITIVE:"primitive",DATAFRAME:"dataframe",LIST:"list",MATRIX:"matrix",DATE:"date",FACTOR:"factor",VECTOR:"vector"},deployr:{RBOOLEAN:"logical",RNUMERIC:"numeric",RINTEGER:"integer",RSTRING:"character",RDATE:"date",RPOSIX_DATE:"posixct",RBOOLEAN_VECTOR:"logicalVector",RNUMERIC_VECTOR:"numericVector",RINTEGER_VECTOR:"integerVector",RSTRING_VECTOR:"characterVector",RDATE_VECTOR:"dateVector",RPOSIX_DATE_VECTOR:"posixctVector",RLIST:"list",RDATAFRAME:"dataframe",RFACTOR:"factor",RORDERED:"ordered",RBOOLEAN_MATRIX:"logicalMatrix",RNUMERIC_MATRIX:"numericMatrix",RINTEGER_MATRIX:"integerMatrix",RSTRING_MATRIX:"characterMatrix"},isDate:function(a){return a===this.deployr.RDATE||a===this.deployr.RPOSIX_DATE||a===this.deployr.RDATE_VECTOR||a===this.deployr.RPOSIX_DATE_VECTOR||a===this.r.DATE},deployrToR:function(a){var b=this.deployr,c=this.r;if(!f[a]){f[b.RBOOLEAN]=c.PRIMITIVE;f[b.RNUMERIC]=c.PRIMITIVE;f[b.RINTEGER]=c.PRIMITIVE;f[b.RSTRING]=c.PRIMITIVE;f[b.RDATE]=c.DATE;f[b.RPOSIX_DATE]=c.DATE;f[b.RBOOLEAN_VECTOR]=c.VECTOR;f[b.RNUMERIC_VECTOR]=c.VECTOR;f[b.RINTEGER_VECTOR]=c.VECTOR;f[b.RSTRING_VECTOR]=c.VECTOR;f[b.RDATE_VECTOR]=c.VECTOR;f[b.RPOSIX_DATE_VECTOR]=c.VECTOR;f[b.RLIST]=c.LIST;f[b.RDATAFRAME]=c.DATAFRAME;f[b.RFACTOR]=c.FACTOR;f[b.RORDERED]=c.FACTOR;f[b.RBOOLEAN_MATRIX]=c.MATRIX;f[b.RNUMERIC_MATRIX]=c.MATRIX;f[b.RINTEGER_MATRIX]=c.MATRIX;f[b.RSTRING_MATRIX]=c.MATRIX}return f[a]},assert:function(a){var b=this.deployr,c=null,d=a.value,f;d=!e.isArray(d)?[d]:d;for(var g=0;g<d.length;g++){var h=d[g];switch(a.type){case b.RNUMERIC:case b.RNUMERIC_VECTOR:case b.RNUMERIC_VECTOR:f=e.isNumber;var i=parseFloat(h);h=isNaN(i)?h:i;break;case b.RINTEGER:case b.RINTEGER_VECTOR:f=e.isNumber;var i=parseFloat(h);h=isNaN(i)?h:i;break;case b.RBOOLEAN:case b.RBOOLEAN_VECTOR:f=e.isBoolean;break;case b.RSTRING:case b.RSTRING_VECTOR:f=e.isString;break;case b.RDATE:case b.RPOSIX_DATE:case b.RDATE_VECTOR:case b.RPOSIX_DATE_VECTOR:f=e.isDate;break;case b.RFACTOR:case b.RORDERED:case b.RDATAFRAME:case b.RINTEGER_MATRIX:case b.RBOOLEAN_MATRIX:case b.RSTRING_MATRIX:f=c;break}if(f&&!f(h)){throw new Error("RInputFormatError: "+'"'+h+'" is not a valid "'+a.type+'" type.')}}return a}})},{"./lang":7,"./selfish":14}],14:[function(b,c,d){!(typeof a!=="function"?function(a){a(null,typeof d!=="undefined"?d:window)}:a)(function(a,b){"use strict";b.Base=Object.freeze(Object.create(Object.prototype,{"new":{value:function c(){var a=Object.create(this);a.initialize.apply(a,arguments);return a}},initialize:{value:function d(){}},merge:{value:function e(){var a={};Array.prototype.forEach.call(arguments,function(b){Object.getOwnPropertyNames(b).forEach(function(c){a[c]=Object.getOwnPropertyDescriptor(b,c)})});Object.defineProperties(this,a);return this}},extend:{value:function f(){return Object.freeze(this.merge.apply(Object.create(this),arguments))}}}))})},{}],15:[function(a,b,c){var d=a("./lang");var e=c.get=function(a,b){function c(a,b,d){for(var e in a){var f=b.apply(this,[e,a[e],d]);if(f){return f}else{if(a[e]instanceof Object&&!(a[e]instanceof Array)){c(a[e],b,e)}}}}function e(a,b){var d={};c(a,function(a,c,e){if(a===b){d=c;return d}else{return null}});return d}function f(a){for(var b in a){if(a.hasOwnProperty(b))return a}return!d.isObject(a)?a:null}return f(e(a,b))};var f=c.inArray=function(a,b,c){var d,e=a.length;for(d=0;d<e;d++){if(c){if(a[d][c]===b){return a[d]}}else{if(a[d]===b){return a[d]}}}return null};c.merge=function(a,b){if(!a||typeof a!=="object"){a={}}if(!b||typeof b!=="object"){b={}}for(var c in b){a[c]=b[c]}return a};c.workspace=function(a,b){var c=e(a,"workspace");return c?b?f(c.objects,b,"name"):c.objects||c.object:null};c.signature=function(){var a=Array.prototype.slice.call(arguments["0"],0),b=a.length,c,e={};if(b===1&&d.isObject(a[0])){e=a[0];c=e.project?"/r/project/execute/script":"/r/repository/script/execute"}else if(b===1&&d.isString(a[0])){a=a[0].split("/");c="/r/repository/script/execute";e={author:a[1],directory:a[2],filename:a[3]}}else if(b===2){var f=a[1];c=f?"/r/project/execute/script":"/r/repository/script/execute";a=a[0].split("/");e={project:f,author:a[1],directory:a[2],filename:a[3]}}else if(b>2){e={author:a[2],directory:a[1],filename:a[0]}}return{api:c,opts:e}}},{"./lang":7}],16:[function(a,b,c){},{}],17:[function(a,b,c){var d=b.exports={};d.nextTick=function(){var a=typeof window!=="undefined"&&window.setImmediate;var b=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(a){return function(a){return window.setImmediate(a)}}if(b){var c=[];window.addEventListener("message",function(a){var b=a.source;if((b===window||b===null)&&a.data==="process-tick"){a.stopPropagation();if(c.length>0){var d=c.shift();d()}}},true);return function d(a){c.push(a);window.postMessage("process-tick","*")}}return function e(a){setTimeout(a,0)}}();d.title="browser";d.browser=true;d.env={};d.argv=[];function e(){}d.on=e;d.once=e;d.off=e;d.emit=e;d.binding=function(a){throw new Error("process.binding is not supported")};d.cwd=function(){return"/"};d.chdir=function(a){throw new Error("process.chdir is not supported")}},{}],18:[function(a,b,c){(function(a){(function(c){"use strict";var d,e=function(a){return typeof a==="function"},f=function(a){return Array.isArray?Array.isArray(a):a instanceof Array},g=function(a){return!!(a&&(typeof a).match(/function|object/))},h=function(a){return a===false||a===c||a===null},i=function(a,b){return[].slice.call(a,b)},j="undefined",k=typeof TypeError===j?Error:TypeError;if(typeof a!==j&&a.nextTick){d=a.nextTick}else if(typeof MessageChannel!==j){var l=new MessageChannel,m=[];l.port1.onmessage=function(){m.length&&m.shift()()};d=function(a){m.push(a);l.port2.postMessage(0)}}else{d=function(a){setTimeout(a,0)}}function n(a){d(function(){throw a})}function o(a){return this.then(a,c)}function p(a){return this.then(c,a)}function q(a,b){return this.then(function(b){return e(a)?a.apply(null,f(b)?b:[b]):u.onlyFuncs?b:a},b||c)}function r(a){function b(){a()}this.then(b,b);return this}function s(a){return this.then(function(b){return e(a)?a.apply(null,f(b)?b.splice(0,0,undefined)&&b:[undefined,b]):u.onlyFuncs?b:a},function(b){return a(b)})}function t(a){return this.then(c,a?function(b){a(b);throw b}:n)}var u=function(a){var b=(c!==a?a:u.alwaysAsync)?d:function(a){a()},f=0,i=[],j,l={then:function(a,c){var d=u();i.push([function(b){try{if(h(a)){d.resolve(b)}else{d.resolve(e(a)?a(b):u.onlyFuncs?b:a)}}catch(c){d.reject(c)}},function(a){if(h(c)||!e(c)&&u.onlyFuncs){d.reject(a)}if(c){try{d.resolve(e(c)?c(a):c)}catch(b){d.reject(b)}}}]);f!==0&&b(m);return d.promise},success:o,error:p,otherwise:p,apply:q,spread:q,ensure:r,nodify:s,rethrow:t,isPending:function(){return!!(f===0)},getStatus:function(){return f}};l.toSource=l.toString=l.valueOf=function(){return j===c?this:j};function m(){if(f===0){return}var a=i,b=0,c=a.length,d=~f?0:1,e;i=[];for(;b<c;b++){(e=a[b][d])&&e(j)}}function n(a){var c=false;function d(a){return function(b){if(c){return undefined}else{c=true;return a(b)}}}if(f){return this}try{var h=g(a)&&a.then;if(e(h)){if(a===l){throw new k("Promise can't resolve itself")}h.call(a,d(n),d(v));return this}}catch(i){d(v)(i);return this}b(function(){j=a;f=1;m()});return this}function v(a){f||b(function(){try{throw a}catch(b){j=b}f=-1;m()});return this}return{promise:l,resolve:n,fulfill:n,reject:v}};u.deferred=u.defer=u;u.nextTick=d;u.alwaysAsync=true;u.onlyFuncs=true;u.resolved=u.fulfilled=function(a){return u(true).resolve(a).promise};u.rejected=function(a){return u(true).reject(a).promise};u.wait=function(a){var b=u();setTimeout(b.resolve,a||0);return b.promise};u.delay=function(a,b){var c=u();setTimeout(function(){try{c.resolve(a.apply(null))}catch(b){c.reject(b)}},b||0);return c.promise};u.promisify=function(a){if(a&&e(a.then)){return a}return u.resolved(a)};function v(a,b){var c=i(a);if(c.length===1&&f(c[0])){if(!c[0].length){return u.fulfilled([])}c=c[0]}var d=[],e=u(),g=c.length;if(!g){e.resolve(d)}else{var h=function(a){c[a]=u.promisify(c[a]);c[a].then(function(f){if(!(a in d)){d[a]=b?c[a]:f;--g||e.resolve(d)}},function(f){if(!(a in d)){if(!b){e.reject(f)}else{d[a]=c[a];--g||e.resolve(d)}}})};for(var j=0,k=g;j<k;j++){h(j)}}return e.promise}u.all=function(){return v(arguments,false)};u.resolveAll=function(){return v(arguments,true)};u.nodeCapsule=function(a,b){if(!b){b=a;a=void 0}return function(){var c=u(),d=i(arguments);d.push(function(a,b){a?c.reject(a):c.resolve(arguments.length>2?i(arguments,1):b)});try{b.apply(a,d)}catch(e){c.reject(e)}return c.promise}};typeof window!==j&&(window.D=u);typeof b!==j&&b.exports&&(b.exports=u)})()}).call(this,a("/home/nriesland/deployr/production/branches/RRE-7.3-Rel/libraries/javascript/deployr/node_modules/browserify/node_modules/process/browser.js"))},{"/home/nriesland/deployr/production/branches/RRE-7.3-Rel/libraries/javascript/deployr/node_modules/browserify/node_modules/process/browser.js":17}],19:[function(a,b,c){var d=a("emitter");var e=a("reduce");var f="undefined"==typeof window?this:window;function g(){}function h(a){var b={}.toString.call(a);switch(b){case"[object File]":case"[object Blob]":case"[object FormData]":return true;default:return false}}function i(){if(f.XMLHttpRequest&&("file:"!=f.location.protocol||!f.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}}return false}var j="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};function k(a){return a===Object(a)}function l(a){if(!k(a))return a;var b=[];for(var c in a){if(null!=a[c]){b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]))}}return b.join("&")}s.serializeObject=l;function m(a){var b={};var c=a.split("&");var d;var e;for(var f=0,g=c.length;f<g;++f){e=c[f];d=e.split("=");b[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return b}s.parseString=m;s.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};s.serialize={"application/x-www-form-urlencoded":l,"application/json":JSON.stringify};s.parse={"application/x-www-form-urlencoded":m,"application/json":JSON.parse};function n(a){var b=a.split(/\r?\n/);var c={};var d;var e;var f;var g;b.pop();for(var h=0,i=b.length;h<i;++h){e=b[h];d=e.indexOf(":");f=e.slice(0,d).toLowerCase();g=j(e.slice(d+1));c[f]=g}return c}function o(a){return a.split(/ *; */).shift()}function p(a){return e(a.split(/ *; */),function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();if(d&&e)a[d]=e;return a},{})}function q(a,b){b=b||{};this.req=a;this.xhr=this.req.xhr;this.text=this.xhr.responseText;this.setStatusProperties(this.xhr.status);this.header=this.headers=n(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body=this.req.method!="HEAD"?this.parseBody(this.text):null}q.prototype.get=function(a){return this.header[a.toLowerCase()]};q.prototype.setHeaderProperties=function(a){var b=this.header["content-type"]||"";this.type=o(b);var c=p(b);for(var d in c)this[d]=c[d]};q.prototype.parseBody=function(a){var b=s.parse[this.type];return b?b(a):null};q.prototype.setStatusProperties=function(a){var b=a/100|0;this.status=a;this.statusType=b;this.info=1==b;this.ok=2==b;this.clientError=4==b;this.serverError=5==b;this.error=4==b||5==b?this.toError():false;this.accepted=202==a;this.noContent=204==a||1223==a;this.badRequest=400==a;this.unauthorized=401==a;this.notAcceptable=406==a;this.notFound=404==a;this.forbidden=403==a};q.prototype.toError=function(){var a=this.req;var b=a.method;var c=a.url;var d="cannot "+b+" "+c+" ("+this.status+")";var e=new Error(d);e.status=this.status;e.method=b;e.url=c;return e};s.Response=q;function r(a,b){var c=this;d.call(this);this._query=this._query||[];this.method=a;this.url=b;this.header={};this._header={};this.on("end",function(){var b=new q(c);if("HEAD"==a)b.text=null;c.callback(null,b)})}d(r.prototype);r.prototype.use=function(a){a(this);return this};r.prototype.timeout=function(a){this._timeout=a;return this};r.prototype.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};r.prototype.abort=function(){if(this.aborted)return;this.aborted=true;this.xhr.abort();this.clearTimeout();this.emit("abort");return this};r.prototype.set=function(a,b){if(k(a)){for(var c in a){this.set(c,a[c])}return this}this._header[a.toLowerCase()]=b;this.header[a]=b;return this};r.prototype.getHeader=function(a){return this._header[a.toLowerCase()]};r.prototype.type=function(a){this.set("Content-Type",s.types[a]||a);return this};r.prototype.accept=function(a){this.set("Accept",s.types[a]||a);return this};r.prototype.auth=function(a,b){var c=btoa(a+":"+b);this.set("Authorization","Basic "+c);return this};r.prototype.query=function(a){if("string"!=typeof a)a=l(a);if(a)this._query.push(a);return this};r.prototype.field=function(a,b){if(!this._formData)this._formData=new FormData;this._formData.append(a,b);return this};r.prototype.attach=function(a,b,c){if(!this._formData)this._formData=new FormData;this._formData.append(a,b,c);return this};r.prototype.send=function(a){var b=k(a);var c=this.getHeader("Content-Type");if(b&&k(this._data)){for(var d in a){this._data[d]=a[d]}}else if("string"==typeof a){if(!c)this.type("form");c=this.getHeader("Content-Type");if("application/x-www-form-urlencoded"==c){this._data=this._data?this._data+"&"+a:a}else{this._data=(this._data||"")+a}}else{this._data=a}if(!b)return this;if(!c)this.type("json");return this};r.prototype.callback=function(a,b){var c=this._callback;if(2==c.length)return c(a,b);if(a)return this.emit("error",a);c(b)};r.prototype.crossDomainError=function(){var a=new Error("Origin is not allowed by Access-Control-Allow-Origin");a.crossDomain=true;this.callback(a)};r.prototype.timeoutError=function(){var a=this._timeout;var b=new Error("timeout of "+a+"ms exceeded");b.timeout=a;this.callback(b)};r.prototype.withCredentials=function(){this._withCredentials=true;return this};r.prototype.end=function(a){var b=this;var c=this.xhr=i();var d=this._query.join("&");var e=this._timeout;var f=this._formData||this._data;this._callback=a||g;c.onreadystatechange=function(){if(4!=c.readyState)return;if(0==c.status){if(b.aborted)return b.timeoutError();return b.crossDomainError()}b.emit("end")};if(c.upload){c.upload.onprogress=function(a){a.percent=a.loaded/a.total*100;b.emit("progress",a)}}if(e&&!this._timer){this._timer=setTimeout(function(){b.abort()},e)}if(d){d=s.serializeObject(d);this.url+=~this.url.indexOf("?")?"&"+d:"?"+d}c.open(this.method,this.url,true);if(this._withCredentials)c.withCredentials=true;if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof f&&!h(f)){var j=s.serialize[this.getHeader("Content-Type")];if(j)f=j(f)}for(var k in this.header){if(null==this.header[k])continue;c.setRequestHeader(k,this.header[k])}this.emit("request",this);c.send(f);return this};s.Request=r;function s(a,b){if("function"==typeof b){return new r("GET",a).end(b)}if(1==arguments.length){return new r("GET",a)}return new r(a,b)}s.get=function(a,b,c){var d=s("GET",a);if("function"==typeof b)c=b,b=null;if(b)d.query(b);if(c)d.end(c);return d};s.head=function(a,b,c){var d=s("HEAD",a);if("function"==typeof b)c=b,b=null;if(b)d.send(b);if(c)d.end(c);return d};s.del=function(a,b){var c=s("DELETE",a);if(b)c.end(b);return c};s.patch=function(a,b,c){var d=s("PATCH",a);if("function"==typeof b)c=b,b=null;if(b)d.send(b);if(c)d.end(c);return d};s.post=function(a,b,c){var d=s("POST",a);if("function"==typeof b)c=b,b=null;if(b)d.send(b);if(c)d.end(c);return d};s.put=function(a,b,c){var d=s("PUT",a);if("function"==typeof b)c=b,b=null;if(b)d.send(b);if(c)d.end(c);return d};b.exports=s},{emitter:20,reduce:21}],20:[function(a,b,c){b.exports=d;function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype){a[b]=d.prototype[b]}return a}d.prototype.on=d.prototype.addEventListener=function(a,b){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(b);return this};d.prototype.once=function(a,b){var c=this;this._callbacks=this._callbacks||{};function d(){c.off(a,d);b.apply(this,arguments)}d.fn=b;this.on(a,d);return this};d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var c=this._callbacks[a];if(!c)return this;if(1==arguments.length){delete this._callbacks[a];return this}var d;for(var e=0;e<c.length;e++){d=c[e];if(d===b||d.fn===b){c.splice(e,1);break}}return this};d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d){c[d].apply(this,b)}}return this};d.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],21:[function(a,b,c){b.exports=function(a,b,c){var d=0;var e=a.length;var f=arguments.length==3?c:a[d++];while(d<e){f=b.call(null,f,a[d],++d,a)}return f}},{}],22:[function(a,b,c){b.exports={name:"deployr",version:"7.3.0",description:"Simplified JavaScript client library for making requests to DeployR.","private":true,keywords:["deployr","deployr.io","ajax","R","api","simple"],author:"DeployR - Revolution Analytics Inc.",contributors:[{name:"Sean Wells"}],homepage:"http://deployr.revolutionanalytics.com/documents/dev/client-jsdoc",scripts:{start:"gulp start"},devDependencies:{"browserify-shim":"~3.4.1",browserify:"~3.36.0","vinyl-source-stream":"~0.1.1",connect:"~2.14.3",gulp:"^3.8.8","gulp-uglifyjs":"~0.4.2","gulp-plumber":"~0.6.4","gulp-util":"~2.2.20","gulp-livereload":"~2.1.0","gulp-jshint":"^1.7.1","gulp-header":"^1.1.1"},dependencies:{superagent:"^0.18.0","d.js":"^0.6.0",ws:"^0.4.32"},main:"deployr.js",engines:{node:">= 0.10.0"},license:"Apache 2.0 License"}},{}]},{},[2])(2)});